<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆé•¿æ—¶å…‰è½´ - äº‘èˆ’æˆé•¿è®°å½•</title>
    <link href="css/style.css" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* éšè—æ»šåŠ¨æ¡ä½†ä¿ç•™åŠŸèƒ½ */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #FFC8DD; border-radius: 10px; }
        
        /* æ‹ç«‹å¾—æ•ˆæœ */
        .polaroid {
            background: white;
            padding: 6px 6px 20px 6px;
            box-shadow: 2px 4px 12px rgba(0,0,0,0.08);
            transform: rotate(-2deg);
            transition: all 0.3s;
        }
        .polaroid:hover {
            transform: rotate(0deg) scale(1.02);
            z-index: 10;
            box-shadow: 4px 8px 16px rgba(0,0,0,0.12);
        }

        /* èƒ¶å¸¦æ•ˆæœä¼˜åŒ– */
        .washi-tape {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            width: 90px;
            height: 28px;
            background-color: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(2px);
            border-left: 1px dashed rgba(0,0,0,0.05);
            border-right: 1px dashed rgba(0,0,0,0.05);
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            z-index: 30;
            pointer-events: none;
        }

        /* è£…é¥°è´´çº¸ */
        .sticker-star {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #FFD166;
            clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
            opacity: 0.2;
            z-index: -1;
        }

        @keyframes blob {
            0% { transform: translate(0px, 0px) scale(1); }
            33% { transform: translate(30px, -50px) scale(1.1); }
            66% { transform: translate(-20px, 20px) scale(0.9); }
            100% { transform: translate(0px, 0px) scale(1); }
        }
        .animation-delay-2000 { animation-delay: 2s; }
        .animation-delay-4000 { animation-delay: 4s; }

        @keyframes fadeInFast {
            0% { opacity: 0; transform: scale(0.95); }
            100% { opacity: 1; transform: scale(1); }
        }
        .animate-fade-in-fast {
            animation: fadeInFast 0.2s ease-out forwards;
        }
    </style>
</head>
<body class="bg-baby-bg bg-grid-pattern min-h-screen text-slate-700">

    <div id="header-placeholder"></div>

    <!-- èƒŒæ™¯è£…é¥°æµ®åŠ¨æ³¡æ³¡ -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none -z-10">
        <div class="absolute top-[10%] left-[10%] w-64 h-64 bg-baby-pink/20 blur-3xl rounded-full animate-blob"></div>
        <div class="absolute top-[40%] right-[10%] w-72 h-72 bg-baby-yellow/20 blur-3xl rounded-full animate-blob animation-delay-2000"></div>
        <div class="absolute bottom-[20%] left-[15%] w-80 h-80 bg-mist-blue/20 blur-3xl rounded-full animate-blob animation-delay-4000"></div>
    </div>

    <main class="max-w-4xl mx-auto px-4 pb-32 pt-12 overflow-hidden">
        
    <header class="text-center mb-16 relative">
        <div class="inline-block relative">
            <h1 class="text-4xl font-extrabold text-slate-800 tracking-tight relative z-10">
                äº‘èˆ’çš„è„šå° ğŸ‘£
            </h1>
            <div class="absolute -bottom-2 left-0 w-full h-4 bg-baby-yellow/60 -rotate-2 -z-0 rounded-sm"></div>
        </div>
            <p class="mt-4 text-slate-500 text-sm font-medium">âœ¨ è®°å½•çˆ±ä¸è¢«çˆ±çš„æ¯ä¸€å¤© âœ¨</p>
        </header>

        <!-- é‡Œç¨‹ç¢‘å‹‹ç« å¢™ -->
        <section id="milestone-wall" class="mb-16 px-4">
            <div class="flex items-center justify-between mb-8 px-2 group/wall">
                <div class="flex items-center gap-2 cursor-pointer" onclick="toggleMilestones()">
                    <h2 class="text-sm font-bold text-slate-500 flex items-center gap-2">
                        <i data-lucide="award" class="w-4 h-4 text-baby-yellow"></i>
                        æˆé•¿å‹‹ç« å¢™
                    </h2>
                    <span id="milestone-stats" class="text-[10px] font-bold text-baby-pink-deep bg-baby-pink/10 px-2 py-0.5 rounded-full">
                        åŠ è½½ä¸­...
                    </span>
                    <i id="milestone-toggle-icon" data-lucide="chevron-up" class="w-4 h-4 text-slate-400 transition-transform duration-300"></i>
                </div>
                <a href="milestones.html" class="text-xs font-bold text-baby-pink-deep hover:underline flex items-center gap-1">
                    è¿›å…¥å‹‹ç« é¦†
                    <i data-lucide="arrow-right" class="w-3 h-3"></i>
                </a>
            </div>
            <div id="milestone-list-container" class="transition-all duration-500 overflow-hidden max-h-[1000px]">
                <div id="milestone-list" class="flex flex-wrap gap-x-3 gap-y-10 sm:gap-6 justify-center pb-8">
                    <!-- åŠ¨æ€åŠ è½½å‹‹ç«  -->
                </div>
            </div>
        </section>

        <!-- ç­›é€‰ä¸æ’åºæ§åˆ¶æ  -->
        <div class="flex items-center justify-end gap-3 mb-8 px-4 relative z-20">
            <button id="sort-toggle" class="flex items-center gap-1.5 text-slate-500 hover:text-baby-pink-deep transition-colors text-xs sm:text-sm font-bold bg-white/60 backdrop-blur-sm px-3 py-1.5 rounded-full border border-dashed border-slate-200 hover:border-baby-pink-deep/50 shadow-sm hover:shadow-md active:scale-95" onclick="toggleSort()">
                <i id="sort-icon" data-lucide="arrow-down" class="w-3.5 h-3.5"></i>
                <span id="sort-label">æ—¶é—´å€’åº</span>
            </button>
            
            <label class="flex items-center gap-2 cursor-pointer group select-none bg-white/60 backdrop-blur-sm px-3 py-1.5 rounded-full border border-dashed border-slate-200 hover:border-baby-pink-deep/50 shadow-sm hover:shadow-md transition-all has-[:checked]:border-baby-pink-deep has-[:checked]:bg-baby-pink/10 has-[:checked]:shadow-inner">
                <input type="checkbox" id="hide-pending-check" class="peer hidden" onchange="togglePendingFilter()">
                <div class="w-8 h-5 bg-slate-200 peer-checked:bg-baby-pink-deep rounded-full relative transition-colors shadow-inner flex items-center px-0.5 peer-checked:[&>div]:translate-x-3">
                    <div class="w-4 h-4 bg-white rounded-full shadow-sm transition-all"></div>
                </div>
                <span class="text-xs sm:text-sm font-bold text-slate-500 group-hover:text-baby-pink-deep peer-checked:text-baby-pink-deep transition-colors">å±è”½å¾…åŠ</span>
            </label>
        </div>

        <div class="relative">
            <div class="absolute left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-baby-pink-deep/0 via-baby-pink-deep/30 to-baby-pink-deep/0 -ml-px border-l-2 border-dashed border-baby-pink-deep/30 h-full"></div>

            <div id="timeline-container" class="space-y-12 sm:space-y-24">
                <div id="loading" class="flex flex-col items-center justify-center py-20">
                    <div class="animate-bounce text-4xl mb-4">ğŸˆ</div>
                    <p class="text-slate-400">æ­£åœ¨æ‰“å¼€å›å¿†ç›’å­...</p>
                </div>
            </div>

            <!-- æ— é™æ»šåŠ¨åŠ è½½æŒ‡ç¤ºå™¨ -->
            <div id="infinite-scroll-trigger" class="h-20 flex items-center justify-center mt-8">
                <div id="loading-more" class="hidden">
                    <div class="flex items-center gap-2 text-slate-400 text-sm">
                        <div class="w-2 h-2 bg-baby-pink-deep rounded-full animate-bounce"></div>
                        <div class="w-2 h-2 bg-baby-pink-deep rounded-full animate-bounce [animation-delay:0.2s]"></div>
                        <div class="w-2 h-2 bg-baby-pink-deep rounded-full animate-bounce [animation-delay:0.4s]"></div>
                        <span>æ­£åœ¨åŠ è½½æ›´å¤šå›å¿†...</span>
                    </div>
                </div>
                <div id="no-more-data" class="hidden text-slate-300 text-xs font-medium tracking-widest uppercase">
                    âœ¨ å·²ç»åˆ°åº•å•¦ï¼ŒæœŸå¾…æ›´å¤šç²¾å½© âœ¨
                </div>
            </div>
        </div>

        <a href="record.html" class="fixed bottom-10 right-8 group z-40">
            <div class="absolute inset-0 bg-baby-pink-deep rounded-full animate-ping opacity-20"></div>
            <div class="w-14 h-14 bg-baby-pink-deep text-white rounded-full flex items-center justify-center shadow-lg shadow-baby-pink-deep/40 transform group-hover:scale-110 group-hover:-rotate-90 transition-all duration-300">
                <i data-lucide="plus" class="w-8 h-8"></i>
            </div>
        </a>
    </main>

    <script src="js/auth.js"></script>
    <script src="js/components.js"></script>
    <script src="js/api.js"></script>
    <script src="js/timeline.js"></script> 
    <script>
        lucide.createIcons();
        if (checkAuthAndRedirect()) {
            loadTimeline();
        }
    </script>
</body>
</html>